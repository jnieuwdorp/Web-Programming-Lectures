<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>TI1505 Web Programming: JavaScript</title>

  <meta name="description" content="A lecture on JavaScript">
  <meta name="author" content="Claudia Hauff">

  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <link rel="stylesheet" href="../css/reveal.min.css">
  <link rel="stylesheet" href="../css/theme/tudelft.css" id="theme">
  <link rel="stylesheet" href="../lib/css/pure-min.css">

  <!-- For syntax highlighting -->
  <link rel="stylesheet" href="../lib/css/zenburn.css">

  <!-- If the query includes 'print-pdf', use the PDF print sheet -->
  <script>
  document.write( '<link rel="stylesheet" href="../css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );

  <!-- small functions to show off JavaScript -->
  function helloWorld()
  {
    alert("Hello World!");
  }
  
  function exampleCall()
{
   for(var i=0; i < arguments.length; i++)
   {
      alert(arguments[i]);
   }
}

  function browserAlert()
  {
    alert("Browser name: "+navigator.appName+"\nCode name: "+navigator.appCodeName+"\nVersion: "+navigator.appVersion);
  }

  function cookieAlert()
  {
    alert("Are cookies enabled: "+navigator.cookieEnabled);
  }

  function languageAlert()
  {
    alert("Browser language: "+navigator.language);
  }

  function onlineAlert()
  {
    alert("Is the browser online: "+navigator.onLine);
  }

  function multiplyAlert(x, y)
  {
    alert("Result of "+x+" x "+y+" = "+x*y);
  }
  
  window.onload = function() {
  document.getElementById("button1").onclick = changeColor;
};
function changeColor() {
  var clickMe = document.getElementById("button1");
  clickMe.style.color = "red";
}

  </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section data-background-transition="slide" data-background="../forms-lecture/img/tu_delft_library.jpg" style="background: rgba(0,129,195,.9); color: white" id="presentable" class="bookend">          
          <h1>TI1505: JavaScript</h1>
          <h3>Claudia Hauff</h3>
        </section>

        <section>
          <h2>Today: a whirlwind tour of JavaScript</h2>
          <p>
            The lecture today covers chapter 8 of the book <a href="http://www.webstepbook.com/">Web Programming Step by Step</a>. The book's lecture slides for this chapter are available <a href="http://www.webstepbook.com/supplements-2ed/slides/chapter08-javascript.shtml">here</a>.
          </p>
        </section>


        <section>
          <h2>JavaScript: a Client-side technology</h2>

          <p>Fetching &amp; processing a Web page:</p>
          <ul>
          <li>Browser sends a GET request for a Web page to a Web server</li>
          <li>[Web server executes scripts (PHP, ASP, etc.)]</li>
          <li>Web server sends (generated) HTML file to browser</li>
          <li>[Browser executes scripts (JavaScript, etc.)] &amp; renders the page</li>
        </ul>
        <p>JavaScript makes Web page interactive and responsive to user actions.</p>
        </section>   

        <section>
          <h2>Reminder: server-side scripting</h2>

          <p>Previous lectures: PHP (a server-side technology)</p>

          <ul>
            <li>Source code is private, result of script execution is returned (in HTML), not the script itself</li>
            <li>HTML can be rendered by any browser</li>
            <li>Server-side scripts can access additional resources (mostly databases)</li>
          </ul>

        </section>              

        <section>
          <h2>Client-side scripting</h2>

          <ul>
          <li>Source code is always visible ("View Page Source")</li>
          <li>Script execution by the browser relieves the Web server</li>
          <li>JavaScript is event-driven: code blocks executed in response to user actions (click, hover, move, etc.)</li>
        </ul>
      </section>

      <section>
        <h2>JavaScript is ...</h2>
        <ul>
          <li>a client-side technology</li>
          <li>not related at all to the programming language Java</li>
          <li>not equally supported in all browsers (follows int the footsteps of CSS, HTML)</li>
          <li>used to make the Web experience more interactive</li>
            <ul>
              <li>Alter page appearance based on events <button onclick="helloWorld()" class="pure-button pure-button-primary">e.g. a button click</button></li>
              <li>Alter interaction based on <a onclick="browserAlert()">browser type</a>, <a onclick="languageAlert()">language</a> or <a onclick="cookieAlert()">cookie usage</a></li>
              <li>Calculations are performed on the client:
                  <form id="calc_form">
                    <input type="text" pattern="[0-9]+" required id="x" name="x" size="5"> x
                    <input type="text" pattern="[0-9]+" required id="y" name="y" size="5">
                    <button onclick="multiplyAlert(calc_form.elements['x'].value,calc_form.elements['y'].value)" class="pure-button pure-button-primary">Compute</button>
                  </form>
              </li>
              </ul>
        </ul>
        <aside class="notes">
          try, 5 x 4
          try, 5 x 4.5
          try, 5 x "4 blub" => different to PHP
        </aside>
        </section>


        <!-- info on HTML validation -->
        <section>
          <h2>JavaScript vs. OO languages</h2>
          
            <table class="centerTable">
            <tr><th>JavaScript</th><th>OO [Java]</th></tr>
            <tr><td>interpreted</td><td>compiled</td></tr>
            <tr><td>program is readible (<a href="http://jscompress.com/">more or less</a>, <a href="https://raw.github.com/jquery/jquery/master/src/core/ready.js">example</a>)</td><td>byte code</td></tr>
            <tr><td>fewer data types</td><td>--</td></tr>
            <tr><td>variables don't have to be declared</td><td>variables need to be declared</td></tr>
            <tr><td>silent errors</td><td><code>Errors</code> and <code>Exceptions</code></td></tr>
            <tr><td>focus on functions</td><td>focus on classes &amp; objects</td></tr>
            <tr><td>most often coupled with CSS &amp; HTML</td><td>--</td></tr>
          </table>

          <aside class="notes">
          </aside>
        </section>



        <!-- a quick recap of PHP -->
        <section>
          <h2>JavaScript vs. PHP</h2>

            <table class="centerTable">
            <tr><th>JavaScript</th><th>PHP</th></tr>
            <tr><td>interpreted</td><td>interpreted</td></tr>
            <tr><td>leans towards OO</td><td>more procedural</td></tr>
            <tr><td>focus: UI, document-user interaction</td><td>focus: files/forms, HTML output</td></tr>
            <tr><td>runs on the browser (client)</td><td>runs on the Web server</td></tr>
          </table>


          <aside class="notes">
          </aside>
        </section>




        <!-- Effect on PHP script on various (in)valid parameters -->
        <section>
          <h2>The <code>script</code> tag</h2>

          <pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;">
&lt;script src="javascript_code.js" type="text/javascript"></script>
          </code></pre>

          <ul style="padding-top:55px">
            <li><code>script</code> inside HTML's <code>&lt;head></code> and <code>&lt;/head></code></li>
            <li>JavaScript code usually kept in one (or more) separate files</li>
            <li>JavaScript can also be directly embedded in HTML (avoid if possible)</li>
          </ul>
          <aside class="notes">
          </aside>
        </section>

        <section>
          <h2>JavaScript embedded in HTML</h2>

          <pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="html">
          <p><a href="helloworld.html">helloworld.html</a></p>
&lt;!DOCTYPE html>
&lt;html>
&lt;head>
&lt;script>
  function helloWorld()
  {
    alert("Hello World!");
  }
&lt;/script>
&lt;/head>

&lt;body>
  &lt;button onclick="helloWorld()">Hello World Button</button>
&lt;/body>
&lt;/html>
          </code></pre>
<p>bad style: no separation of presentation, content and interaction</p>
          <aside class="notes">
          </aside>
        </section>  

        <section>
          <h2>JavaScript in a separate file</h2>
			<p><a href="helloworld2.html">helloworld2.html</a></p>
          <pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="html">
&lt;!DOCTYPE html>
&lt;html>
&lt;head>
&lt;script src="helloworld.js" type="text/javascript"></script>
&lt;/head>
&lt;body>
  &lt;button onclick="helloWorld()">Hello World Button</button>
&lt;/body>
&lt;/html>
          </code></pre>
          <p>helloWorld.js</p>
          <pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="html">
function helloWorld()
{
  alert("Hello World!");
}
          </code></pre>          

          <aside class="notes">
          </aside>
        </section>  

        <!-- form skeleton -->
        <section>
          <h2>JavaScript's <code>alert</code></h2>
			
			<ul>
				<li>Pop's up a message</li>
				<li>Style cannot be changed through CSS (defined by OS)</li>
			</ul>
          <pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;">
alert("content goes here");
          </code></pre>

          <aside class="notes">
          </aside>
        </section>                


        <!-- the most common attributes of <form> -->
        <section>
          <h2>Variables in JavaScript</h2>

          <pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">
var name = "Tom"; //variables are declared with 'var' (case sensitive)
var grade = 9; //loosely typed (not specified, but still there)
var average = 8.5; //same type as grade
          </code></pre>
<p>Types in JavaScript:</p>
<ul><li><code>Number</code></li>
<li><code>Boolean</code></li>
<li><code>String</code></li>
<li><code>Array</code></li>
<li><code>Object</code></li>
<li><code>Function</code></li>
<li><code>Null</code></li>
<li><code>Undefined</code></li>
</ul>
<p>If unsure, use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof">typeof</a></p>
          <aside class="notes">
          </aside>
        </section>   

<section>
	<h2>Examples of <code>typeof</code></h2>
<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">
// Numbers
typeof 10 === 'number';
typeof 8.5 === 'number';
typeof Infinity === 'number';
typeof NaN === 'number'; // important to remember!

// Strings
typeof "test_string" === 'string';
typeof (typeof 1) === 'string'; // typeof always return a string

// Booleans
typeof true === 'boolean';
typeof false === 'boolean';

// Undefined
typeof undefined === 'undefined';
typeof not_defined_before === 'undefined'; // undefined variable

// Objects
typeof {a:5} === 'object';
typeof [10, 9, 8] === 'object'; 
typeof new Date() === 'object';

// Functions
typeof function(){} === 'function';
typeof Math.cos === 'function';
          </code></pre>
</section>          	

<section>
	<h2><code>String</code></h2>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">
var name = "Tom Jones";
var firstName = name.substring(0, name.indexOf(" ")); //"Tom"
var nameLength = name.length; //9 (a property, not a method)
var nickname = 'Tommy'; //also possible
var combined = name + " with nick " + nickname;
var num1 = "10";
var num2 = 20;
var num3 = num1 + num2; //"1020", different from PHP!!
          </code></pre>
         	<ul><li>The typical string functions as known from other languages are available: <code>charAt, indexOf, lastIndexOf, replace, split, substring, toLowerCase, toUpperCase</code></li>
         	<li>Use the <a href="https://getfirebug.com/">Firebug</a> console to test your JavaScript!</li></ul>
 
 <aside class="notes">
 	- open Firebug console
 	- make an error
 </aside>
</section>

<section>
<h2><code>var</code> vs. no <code>var</code></h2>

<ul>
<li>No difference when in global scope</li>
<li>Within functions, <code>var</code> creates a local variable</li>
<li>Within functions, no <code>var</code> goes up to global scope to find it<li>
</section>

<section>
	<h2>JavaScript is event-driven</h2>
	<img src="http://www.webstepbook.com/supplements-2ed/slides/images/figure_3_event.png">
	<small>Image source: Web Programming Step by Step</small>
	
	<ul>
	<li>JavaScript snippets in response to <b>events</b> (user actions)</li>
	<li>Event-driven programming: programming style driven by user events</li>
	</ul>
</section>

<section>
	<h2>A responsive UI control</h2>
<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="html">
&lt;!DOCTYPE html>
&lt;html>
&lt;head>
&lt;script>
	function helloWorld()
	{
		alert("Hello World!");
	}
&lt;/script>
&lt;/head>
&lt;body>
   &lt;button onclick="helloWorld()">Hello World Button&lt;/button>
   <!-- Steps
   	1. pick a control (the button)
   	2. pick an event (click)
   	3. write a JavaScipt function: what should happen if the event occurs?
   	4. attach the function to the event ON the control
    -->
&lt;/body>
&lt;/html>
          </code></pre>
</section>

<section>
	<h2>In general: JavaScript functions</h2>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">
function name(arg1,arg2,arg3,...,argn)
{
   statement;
   statement;
   statement;
}

//concrete example
function  add(x,y)
{
   return x+y;
}
          </code></pre>
</section>

<section>
	<h2>Handling events</h2>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="html">
&lt;element onclick="function_name();"> //just one of many event handlers

//specific examples
&lt;button onclick="alert(5+4)">alert(5+4)&lt;/button>   
&lt;button onclick="alert('5'+4)">alert('5'+4)&lt;/button>
&lt;button onclick="alert('Tom'.substring(0,1))">First letter of 'Tom'&lt;/button>
          </code></pre>

<button onclick="alert(5+4)" class="pure-button pure-button-primary">alert(5+4)</button>   <p></p>
<button onclick="alert('5'+4)" class="pure-button pure-button-primary">alert('5'+4)</button>
<p></p>
<button onclick="alert('Tom'.substring(0,1))" class="pure-button pure-button-primary">First letter of 'Tom'</button>
 
 <p>Advice: user <code>alert()</code> <b>VERY</b> sparingly.</p>
</section>

<section>
	<h2><a href="https://developer.mozilla.org/en/docs/DOM">DOM</a>: Document Object Model</h2>
	<p>DOM: a set of JavaScript objects which represent each element on a Web page</p>
	<img src="img/dom.png">
</section>

<section>
	<h2><a href="https://developer.mozilla.org/en/docs/DOM">DOM</a>: Document Object Model</h2>
	<ul>
	<li>Extract an element's state
		<ul>
			<li>Is the checkbox checked?</li>
			<li>Is the button disabled?</li>
			<li>Is a <code>&lt;h1&gt;</code> appearing on the page?</li>
			</ul>
	<li>Change an element's state
		<ul>
			<li>Check a checkbox</li>
			<li>Disable a button</li>
			<li>Create an <code>&lt;h1&gt;</code> element on a page if none exists</li>
		</ul>
	<li>Change an element's style
		<ul>
			<li>Change the color of a button</li>
			<li>Change the size of a paragraph</li>
			<li>Change the background color of the page</li>
		</ul>		
	</ul>
</section>

<section>
	<h2>DOM element objects</h2>
	
	<p>Every element on a Web page is associated with a DOM object</p>
	
	<img src="http://www.webstepbook.com/supplements-2ed/slides/images/figure_5_dom.png">
	<br><small>Image source: Web Programming Step by Step</small>
	
	<p>Tools exist to view DOM elements of Web pages, for example <a href="https://addons.mozilla.org/en-US/firefox/addon/dom-inspector-6622/">DOM Inspector</a> (<a href="simple_dom.html">test it</a>)</p>
</section>

<section>
	<h2>document.getElementById</h2>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="html">
//general way of accessing DOM elements
var name = document.getElementById("id") 

//specific example
&lt;button onclick="
   var tb = document.getElementById('out');
   tb.value = 'Hello World!';"
   >Say Hello World!&lt;/button>
&lt;input type="text" id="out">
          </code></pre>
<button autocomplete="off" onclick="
	var tb = document.getElementById('out');
	tb.value = 'Hello World!';" class="pure-button pure-button-primary">Say Hello World!</button>
<input type="text" id="out">
</section>


<section>
	<h2>document.getElementById</h2>
	<p>What happens if the <code>id</code> is not unique?</p>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="html">
//general way of accessing DOM elements
//returned is the DOM object for an element with the id
var name = document.getElementById("id") 

//specific example
&lt;button onclick="
   var tb = document.getElementById('out1');
   tb.value = 'Hello World!';"
   >Say Hello World!&lt;/button>   
&lt;input type="text" id="out1"> &lt;input type="text" id="out1">
          </code></pre>
<button autocomplete="off" onclick="
	var tb = document.getElementById('out1');
	tb.value = 'Hello World!';" class="pure-button pure-button-primary">Say Hello World!</button>
<input type="text" id="out1" size="15"> <input type="text" id="out1" size="15">

</section>


<section>
	<h2>Not just forms ...</h2>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="html">
&lt;button onclick="
var span1 = document.getElementById('span1');
var span2 = document.getElementById('span2');
var tmp = span1.innerHTML;
span1.innerHTML = span2.innerHTML;
span2.innerHTML = tmp;
">Swap the span content&lt;/button>
&lt;span id="span1" style="background-color:red"> &lt;b>Hello&lt;/b> &lt;/span>
&lt;span id="span2" style="background-color:green">World&lt;/span>
          </code></pre>

<button class="pure-button pure-button-primary" onclick="
var span1 = document.getElementById('span1');
var span2 = document.getElementById('span2');
var tmp = span1.innerHTML;
span1.innerHTML = span2.innerHTML;
span2.innerHTML = tmp;
">Swap the span content</button>&nbsp;&nbsp;
<span id="span1" style="background-color:red"> <b>Hello</b> </span> &nbsp;&nbsp;
<span id="span2" style="background-color:green"> World </span>

<ul>
<li>form controls: use <code>value</code> to change the text</li>
<li>other elements: use <code>innerHTML</code> to change the text</li>
<li>arbitrary HTML can be injected into the page via <code>innerHTML</code> (don't overdo it)</li>
</ul>

</section>


<section>
<h2>DOM object properties</h2>

	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" >
&lt;div id="main" class="main_class">
   &lt;p>Hello &lt;em>World!&lt;/em>&lt;/p>
   &lt;img id="worldImage" src="images/1.jpg" />
&lt;/div>
</code></pre>

<table class="centerTable">
            <tr><th>Property</th><th>Example</th></tr>
            <tr><td><coe>tagName</code> (element's HTML tag)</td><td><code>$("main").tagName</code> is <code>DIV</code></td></tr>
        
            <tr><td><coe>className</code> (element's CSS class/es)</td><td><code>$("main").className</code> is <code>main_class</code></td></tr>    

            <tr><td><coe>innerHTML</code> (content inside an element)</td><td><code>$("main").innerHTML</code> is <code>\n <p>Hello....</code></td></tr>  
 
            <tr><td><coe>src</code> (URL target of an image)</td><td><code>$("worldImage").src</code> is <code>images/1.jpg</code></td></tr>             
              
          </table>
</section>



<section>
<h2>DOM object properties (forms)</h2>

	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" >
&lt;input id="firstName" type="text" />
&lt;input id="agreed" type="checkbox checked="checked" /> Did you read the terms and conditions?
</code></pre>

<table class="centerTable">
            <tr><th>Property</th><th>Example</th></tr>
            <tr><td><coe>value</code> (text in an input control)</td><td><code>$("firstName").value</code> may be <code>"Tom"</code></td></tr>
        
            <tr><td><coe>checked</code> (checkbox)</td><td><code>$("agreed").checked</code> is <code>true</code></td></tr>    

            <tr><td><coe>disabled</code> (whether a control is disabled)</td><td><code>$("agreed").disabled</code> is <code>false</code></td></tr>  
 
            <tr><td><coe>readOnly</code> (read-only text box)</td><td><code>$("firstName").readOnly</code> is <code>false</code></td></tr>             
              
          </table>
</section>

<section>
<h2>Style adjustments</h2>

	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="html,javascript" >
&lt;!-- HTML -->	
<button id="button1">I am changing colors</button>

/* JavaScript */
window.onload = function() {
  document.getElementById("clickme").onclick = changeColor;
};
function changeColor() {
  var clickMe = document.getElementById("clickme");
  clickMe.style.color = "red";
}
</pre></code>

<button id="button1" class="pure-button pure-button-primary">I am changing colors</button>

</section>


<section>
<h2>Style adjustments: common errors</h2>

<ul>
<li>not <code>button1.color="red"</code>, but <code>button1.style.color</code></li>
<li>not <code>button1.style.font-size="10px"</code>, but <code>button1.style.fontSize</code></li>
<li>not <code>button1.style.width=10</code>, but <code>button1.style.width="10px"</code></li>
</ul>
</section>


<section>
	<h2><code>typeof(Number)</code></h2>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="html">
var grade = "10";
var average = 8.5;
var combined1 = grade * average; // 85
var combined2 = grade + average; // "108.5"
var combined3 = (grade + average)*2; //217
</code></pre>

<ul>
<li>Integers and floats (doubles) are of the same type</li>
<li>Standard math operators: <code>+ - * / += ++</code>, etc.</li>
<li>Automatic conversion (with a small danger: last line above)</li>
</ul>

</section>


<section>
	<h2>Comments</h2>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">
// the same as in Java, either single line

/* or
   multi
   line
   comments
*/	
</code></pre>
<p>Don't get confused by the commenting mess!</p>
<ul>
<li>HTML: <code>&lt;!-- commenting here --> </code></li>
<li>CSS/JS/PHP: <code>/* commenting here */ </code></li>
<li>Java/JS/PHP: <code>// commenting here </code></li>
<li>PHP: <code># commenting here </code></li>
</ul>
</section>


<section>
	<h2><code>typeof(String)</code></h2>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">
//explicit conversion to numbers
var age = "75, Tom Jones";
var n1 = parseInt(name); //75
var n2 = parseFloat("nothing1.22"); //NaN

//string elements
var properName = "Tom Jones";
var firstLetter = properName.charAt(0);
var firstLetter = properName[0]; //alternative way to access, might fail
var lastLetter = properName.charAt(properName.length-1);
</code></pre>

</section>

<section>
	<h2><code>for</code> loop</h2>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">
//you know this already from Java
var sum = 0;
for(var i = 0; i < 5; i++) 
{
  sum += i;
}

//reverse a string
var s1 = "Hello World";
var s2 = "";
for (var i = s1.length-1; i>=0; i--) 
{
  s2 += s1.charAt(i);
}
//s2: "dlroW olleH"
</code></pre>

</section>

<section>
	<h2>Calculations with <code>Math</code></h2>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">
//Math is an object
var roundOff = Math.floor(3.9888); //3
var roundUp  = Math.ceil(3.00001); //4
var rounded = Math.round(3.001); //3
var absolute = Math.abs(-3.444); //3.444
var maximum = Math.max(4,2); //4
var randVal = Math.random(); //returns a value in [0,1)

//more of the usual suspects
</code></pre>

<p>Tip: use Firebug for a complete overview</p>

</section>

<section>
	<h2><code>null</code> vs. <code>undefined</code></h2>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">
var grade1 = null;
var grade2 = 9;
var averageGrade;

// at this point
// grade1 == null
// averageGrade is undefined
</code></pre>

<ul>
<li><code>undefined</code>: has not been referenced before, it does not exist
<li><code>null</code>: it exists, but the value is unknown
</li>
</ul>

</section>

<section>
<h2>Logical operators</h2>

<p>JavaScript has both:
 <ul style="list-style:none"><li><code>==</code> (comparison of value)</li>
 <li><code>===</code> (comparison of value &amp; type)</li>
 </ul>
 <br>
 This is an artifact of loose typing. </p>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">
var x = 5;
var y = 5;
var z = "5";
var a = null;
var b; //undefined
var c = "5b";

x == y;  // true
x === y; // true
x == z;  // true
x === z; // false (wrong type)
x == a;  // false
x == b;  // false
a == b;  // true !!
a != b;  // false
a === b; // false (not of the same type)
a !== b; // true 
x == c;  // false
</code></pre>
The usual <code>&lt;, &gt; &lt;= &gt;=</code> exist as well.
</section>

<section>
<h2><code>if ... else</code></h2>
<ul>
<li>You should know this from Java</li>
<li>Almost anything can be a <code>condition</code></li>
</ul>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">
if(condition)
{
   statements;
}
else if(condition)
{
   statements;
}
else
{
   statements;
}
</code></pre>
</section>

<section>
<h2><code>if ... else</code></h2>
<ul>
<li>False: <code>0, 0.0, NaN, "", null, undefined</code> (but not <code>"0"</code>)</li>
<li>True: anything else</li>
<li>Do not make too many assumptions, check if you are unsure (Firebug)</li>
<li>A <code>!!</code> (or <code>!</code>) is a casted (inverted) Boolean</li>
</ul>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">
//anything can be used as a Boolean

var x = true; 		// evaluates to true
var y = 0;
var z = 1;
var name = "Tom";
var c = "0";

if(x)              { /* we end up here */ }
if(x == true)      { /* we end up here */ }
if(y)              { /* we do not end up here */ }
if(z)              { /* we end up here */ }
if(name)           { /* we end up here */ }
if(name==true)     { /* we do not end up here */ }
if(c)              { /* we end up here */ }

//casted Boolean
var bx = !!(z); // true, typeof(z): number, typeof(bx): boolean
</code></pre>

<aside class="notes">
var x = 5;
var bx = !!(x); // true
var bx = !(x); // false
</aside>

</section>


<section>
<h2><code>while loops</code></h2>
<ul>
<li>You should know this from Java</li>
</ul>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">
while(condition)
{
   statements;
}

do(condition)
{
   statements;
} while(condition);

//break &amp; continue also exist
</code></pre>
</section>

<section>
<h2>Popups</h2>
<ul>
<li><code>alert</code> (a message, "OK" as only option)</li>
<li><code>confirm</code> (a message, "OK" and "Cancel" as options)</li>
<li><code>prompt</code> (a message, asks for user input)</li>
</ul>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">

var x = alert('This is a message');
// x is undefined

var x = confirm('This is a message');
// x is either true or false

var x = prompt('This is a message');
// x contains the returned string (null if nothing was entered)

</code></pre>
</section>


<section>
<h2>Arrays</h2>

	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">

var arrayName = []; //empty array, arrayName.length=0
var grades = [1,2,3,4,5,6,7,8,9,10];
var lowest = grades[0];
var highest = grades[9]; //grades[10] is undefined
grades[10] = 11;

var mixed = [1,2,"grade 3",4,5]; //mixed types are possible, no conversion

</code></pre>
</section>

<section>
<h2>Array methods</h2>

<p>Mixed type ability gives a hint: arrays are the workhorse of JavaScript, simulate lists, queues, stacks (we know this already from PHP)</p>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">

var grades = [1,2,3,4,5,6,7,8,9,10];
grades.push(11);       //[1,2,3,4,5,6,7,8,9,10,11];
grades.unshift(0);     //[0,1,2,3,4,5,6,7,8,9,10,11]; returns new length of the array
grades.pop();          //[0,1,2,3,4,5,6,7,8,9,10]; returns new length of the array
grades.shift();        //[1,2,3,4,5,6,7,8,9,10]; returns number removed
grades.sort();         //[[1, 10, 2, 3, 4, 5, 6, 7, 8, 9]; by default lexicographic sort

grades.sort(function(a,b){return a-b;}); // much better, sorts numerically ascending
grades.sort(function(a,b){return a-b;}); // sorts numerically descending

//push,pop -> queue
//unshift/shift -> stack

</code></pre>
</section>


<section>
<h2>Array methods</h2>

<p>Arrays are also used as maps</p>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">

var grades = [1,2,3,4,5,6,7,8,9,10];
grades["test"] = 20; // [1,2,3,4,5,6,7,8,9,10] (does not appear here)
grades.length;       // 10
grades["test"];      // returns 20
</code></pre>
</section>






<section>
<h2>A bit more about strings</h2>

<p>Mixed type ability gives a hint: arrays are the workhorse of JavaScript, simulate lists, queues, stacks (we know this already from PHP)</p>
	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">

var name = "Tom Jones";
var tokens = name.split(" ") // ["Tom", "Jones"]
tokens.reverse();            // ["Jones", "Tom"]
var name2 = tokens.join("-");// "Jones-Tom"

//beware, reverse() transform the array, join returns a new string
</code></pre>
</section>



<section>
<h2><code>arguments</code> array</h2>


	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">
function example()
{
   for(var i=0; i < arguments.length; i++)
   {
      alert(arguments[i]);
   }
}
</code></pre>

<button onclick='exampleCall("This","is","a","test");' class="pure-button pure-button-primary">This is a test</button>

<ul>
<li>Every function contains <code>arguments</code>, array with passed parameters</li>
<li>Nice: functions can have varying numbers of parameters</li>
</ul>

</section>

<section>
<h2><code>Date</code> object</h2>

<p><code>Date</code> has many methods to set/get parts of a date (seconds, minutes, time zone offset, etc.)</p>

	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="javascript">

var today = new Date();          //Date {Fri Jan 10 2014 10:07:44 GMT+0100 (CET)}

var tomor = new Date(2014,0,11); //Date {Sat Jan 11 2014 00:00:00 GMT+0100 (CET)}

//getDay starts at 0 (Sunday) and ends at 6 (Saturday)
//Date stores months from 0-11
</code></pre>

</section>


<section>
<h2><code>eval</code> function</h2>

<p>Treats a String as JavaScript code and runs it (if user input, a security hazard)</p>

	<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="html">
&lt;button onclick='
   eval("
         var a = 5; 
         var b = 6; 
        alert(a+b);
   ");'>
Run eval code&lt;/button>
</code></pre>

<button onclick='eval("var a = 5; var b = 6; alert(a+b);");' class="pure-button pure-button-primary">Run eval code</button>

</section>



<section>
<h2>OO for JavaScript</h2>

<ul>
<li>Small programs often don't need it</li>
<li>JavaScript has functions as first-class citizens</li>
<li>Large projects benefit from OO</li>
<li>OO groups related data and behavior</li>
<li>Built-in objects: Strings, arrays, HTML/DOM nodes</li>
</ul>

</section>


<section>
<h2>Anonymous objects</h2>

<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="html">
var pt = {
   x: 10,
   y: 20
   };
alert(pt.x +", " + pt.y + ", type: " + typeof(this);
</code></pre>

<button class="pure-button pure-button-primary" onclick='var pt = {
   x: 10,
   y: 20
   };
alert(pt.x +", " + pt.y + ", type: "+typeof(this));'>Run point</button>
</section>

<section>
<h2>Adding a method</h2>

<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="html">
var pt = {
   x: 10,
   y: 20,
   sumOfXY: function() {return this.x+this.y;}
   };
alert(pt.x +", " + pt.y + ", type: " + typeof(this) +", sum="+pt.sumOfXY();
</code></pre>

<button class="pure-button pure-button-primary" onclick='var pt = {
   x: 10,
   y: 20,
   sumOfXY:function() {return this.x+this.y;}
   };
alert(pt.x +", " + pt.y + ", type: "+typeof(this)+", sum="+pt.sumOfXY());'>Run point</button>
</section>



<section>
<h2>Simulating a constructor through a function</h2>

<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;" class="html">
function Point(xVal, yVal)
{
   this.x = xVal;
   this.y = yVal;
   this.sumOfXY = function() { return this.x+this.y;}; //function in a function!
}

var p = new Point(10,20);
</code></pre>
<ul>
<li>An object constructor is just a normal function</li>
<li>What does JS do with <code>new</code>?
<ul><li>new anonymous empty object is created and used as <code>this</code></li>
<li>returns new object at the end of the function</li>
</ul>
</li>
</ul>
</section>



  <section>
    <h2>THE END</h2>
  </section>
 </div>

</div>

<script src="../lib/js/head.min.js"></script>
<script src="../js/reveal.min.js"></script>

<script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
        { src: '../lib/js/classList.js', condition: function() { return !document.body.classList; } },
        { src: '../plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: '../plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: '../plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: '../plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
        { src: '../plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });

</script>


</body>
</html>
